# PrizeBond Checker

One of the problems which I usually encountered was checking prize bonds after every draw. It took me more than an hour or two to insert numbers on websites and check the results of a draw. I faded while following this manual process to check if I won or lose. As a consequence, I wrote this repository which automates the process of checking prize bonds. Now, I get an autogenerated email after each draw, the email contains info about my draws with their results.

### How can you add your numbers in this repository?

Add your prize bond data into the `sample.json` file and select the pull request option when committing your changes to the `master` branch or if you are not a tech guy simply email your numbers at `salman.khwaja29@gmail.com` and I will add your numbers to the repository. 
**The Prizebond data should look like this**

```
{
	<your_name>: {
		"bonds": {
			<bond_value>: [
				[<serial_start>, <serial_end>],
				[<serial_start>, <serial_end>]
			],
			<bond_value>: [
				[<serial_start>, <serial_end>],
				[<serial_start>, <serial_end>]
			]
		},
		"email": <your_email>
		"cc": [<email1>, <email2>]
	}
}
```

| parameters | type | description |
| --- | --- | --- |
| your_name | str | draw owner name i.e “Ali Salman” |
| bond_value | str | the value of your bond </br> options: “100”, “200”, “750”, “1500” |
| serial_start | int | starting number of your serial i.e 900101 |
| serial_end | int | ending number of your serial i.e 900200 |
| your_email | str | email where you want to receive draw results |
| cc | list(str) | emails you want to cc with your draw results |

**Example:**

```json
{
	"Ali Salman": {
		"bonds": {
			"200": [
				[900101, 900200],
				[890001, 890200]
			],
			"750": [
				[670701, 670900]
			]
		},
		"email": "salman.khuwaja29@gmail.com"
		"cc": ["xyz@example.com", "xyz1@example.com"]
	}
}
```

## Local Setup

If you don’t want to share your data in public that you can also run this locally on your machines. 

1. Clone this repository
    
    ```bash
    git clone [https://github.com/salman299/prizebond-checker.git](https://github.com/salman299/prizebond-checker.git)
    ```
    
2. Create and activate virtual environment in repository directory. If you  don’t have `virtualenv` in your machine you can follow this guide to install this package.
    
    ```bash
    # to create a virtual envirnoment named venv
    virtualenv venv
    
    # to activate venv
    source venv/bin/activate
    ```
    
3. Install libraries from `requirements.txt`
    
    ```bash
    pip install -r requirements.txt
    ```
    
4. Run script
    
    ```bash
    python3 ./main.py
    ```
    
    You can also send some optional parameters to the scrip
    
    | parameter | default | description |
    | --- | --- | --- |
    | —year, -y | 2022 (current year) | draw year |
    | —month, -m | 11 (current month) | draw month |
    | --send-email, -se | False | If True, it will send email to users otherwise not |
    | —email, -e | None | sender email </br> required if --send-email is passed in script |
    | —password, -p | None | sender email password </br> required if --send-email is passed in script |
    | —file, -f | ‘./sample.json’ | path of prizebond data json file |
    | —info | False | show logs of prizebond checking in a console |
    | —debug | False | show debug logs in a console |
    
    **Examples:**
    
    ```bash
    # To search prizebonds held in August 2022
    python3 ./main.py --year 2022 --month 8 --info
    
    # To send email to users, there are two ways to two this
    # 1. set username and password as env variables and run the script
    export EMAIL=<sender_email>
    export PASSWORD=<sender_password>
    python3 ./main.py --info --send-email
    # 2. pass an email and password in script argument
    python3 ./main.py --email <send_email> --password <sender_password> --info --send-email
    
    # If you want to use another file instead of sample.json
    python3 ./main.py -y 2022 -m 8 -f ./example.json --info
    ```